<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style/style.css" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css"
      integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
      crossorigin="anonymous"
      defer
    ></script>
    <script
      src="https://kit.fontawesome.com/e618538ebf.js"
      crossorigin="anonymous"
    ></script>
    <script src="js/kosar.js" type="module"></script>

    <title>Szlucska Dóra</title>
  </head>
  <body>
    <!-- -------------kosárgomb -->
    <div class="kosar" onclick="kosarKatt(event)">
      <button>
        <i class="fa-solid fa-shopping-cart nagyIkon"></i>
        <p class="mennyiseg"></p>
      </button>
    </div>

    <div class="container-fluid"></div>

    <!-- -------------LIGHTBOX--------------- -->

    <div class="row">
      <div class="column">
        <img
          src="images/1.jpg"
          style="width: 300px; height: 300px; display: none"
          onclick="openModal();currentSlide(1)"
          class="hover-shadow cursor"
        />
      </div>
      <div class="column">
        <img
          src="images/2.jpg"
          style="width: 300px; height: 300px; display: none"
          onclick="openModal();currentSlide(2)"
          class="hover-shadow cursor"
        />
      </div>
      <div class="column">
        <img
          src="images/3.jpg"
          style="width: 300px; height: 300px; display: none"
          onclick="openModal();currentSlide(3)"
          class="hover-shadow cursor"
        />
      </div>
    </div>

    <div id="myModal" class="modal">
      <span class="close cursor" onclick="closeModal()">&times;</span>
      <div class="modal-content">
        <div class="mySlides">
          <div class="numbertext">1 / 4</div>
          <img src="images/1.jpg" style="width: 100%" class="asd2" />
        </div>

        <div class="mySlides">
          <div class="numbertext">2 / 4</div>
          <img src="images/2.jpg" style="width: 100%" class="asd2" />
        </div>

        <div class="mySlides">
          <div class="numbertext">3 / 4</div>
          <img src="images/3.jpg" style="width: 100%" class="asd2" />
        </div>

        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>

        <div class="caption-container">
          <p id="caption">asd</p>
        </div>

        <div class="column">
          <img
            class="demo cursor asd"
            src="images/1.jpg"
            style="width: 100%"
            onclick="currentSlide(1)"
            alt="Aloe vera"
          />
        </div>
        <div class="column">
          <img
            class="demo cursor asd"
            src="images/2.jpg"
            style="width: 100%"
            onclick="currentSlide(2)"
            alt="Orchidea"
          />
        </div>
        <div class="column">
          <img
            class="demo cursor asd"
            src="images/3.jpg"
            style="width: 100%"
            onclick="currentSlide(3)"
            alt="Könnyezőpálma"
          />
        </div>
      </div>
    </div>

    <!-- --------------------------------- -->
    <script src="js/lightbox.js"></script>
    <script src="js/main.js" type="module"></script>
    <script>
      let kosarNyitva = false;
      function kosarKatt(event) {
        if (!event.target.classList.contains("torlesGomb")) {
          if (event.target.classList.contains("kosar")||event.target.classList.contains("fa-shopping-cart")) {
            if (!kosarNyitva) {
              tartalomMegnez();
              kosarNyitva = true;
            } else {
              gombBezar();
              kosarNyitva = false;
            }
          }}
      }

      function tartalomMegnez() {
        let gomb = document.querySelector(".kosar");
        let kulcsok = Object.keys(localStorage);
        gomb.classList.add("kattintott");
        setTimeout(function () {
          let txt = "";
          for (var i = 0; i < localStorage.length; i++) {
            txt += `<p class="torles ${localStorage.key(i)}">${localStorage.key(
              i
            )}&nbsp&nbsp&nbsp&nbsp<i class="${localStorage.key(i)} fa-sharp fa-solid fa-trash" class="torlesGomb ${localStorage.key(
              i
            )}" onclick="kosarbolTorol(event)"></i></p>`;
          }
          gomb.innerHTML += txt;
        }, 1400);
      }
      function gombBezar() {
        let gomb = document.querySelector(".kosar");
        gomb.innerHTML = `<button><i class="fa-solid fa-shopping-cart"></i><p class="mennyiseg">${localStorage.length}</p></button>`;
        gomb.classList.remove("kattintott");
      }

      function kosarbolTorol(event) {
        console.log(event.target)
        let sorok = document.querySelectorAll(".kosar p");
        let kulcs = event.target.classList[0];
        let mennyiseg = document.querySelector(".mennyiseg");

        for (let i = 0; i < sorok.length; i++) {
          if (sorok[i].classList[1] == kulcs) {
            sorok[i].remove();
          }
        }
        localStorage.removeItem(kulcs);
        mennyiseg.innerHTML = `<p class="mennyiseg">${localStorage.length}</p>`;
      }
    </script>
  </body>
</html>
